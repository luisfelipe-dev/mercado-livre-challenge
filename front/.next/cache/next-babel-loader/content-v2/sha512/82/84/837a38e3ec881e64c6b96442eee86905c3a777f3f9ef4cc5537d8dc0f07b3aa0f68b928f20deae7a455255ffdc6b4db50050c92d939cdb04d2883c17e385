{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/luisfelipe/Desktop/Projetos/ML-FRONT/front/src/components/Header/index.tsx\";\nimport React, { useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport { LoadingContext } from 'context/loadingContext';\nimport { debounce } from 'lodash';\nimport { searchProduct, suggestionProduct } from 'services/api';\nimport * as Style from './styles';\nimport { Container } from 'styles/grid';\nimport OverClick from 'components/OverClick';\n\nconst Header = ({\n  query\n}) => {\n  const loadingContext = useContext(LoadingContext); // const [suggestionsSearch, setSuggestionsSearch] = useState([]); // would be an API call normally\n\n  const {\n    loadingState,\n    focus,\n    focusState,\n    valueSearch,\n    ValueState,\n    productsState,\n    suggestionsSearch,\n    setSuggestionsSearch,\n    setBreadcrumb\n  } = loadingContext;\n  const [, setLoading] = loadingState;\n  const [, setFocus] = focusState;\n  const [, setValueSearch] = ValueState;\n  const router = useRouter();\n\n  const handleSearch = event => {\n    const {\n      value: nextValue\n    } = event.target;\n    setValueSearch(nextValue);\n    const debouncedSave = debounce(() => {\n      suggestionProduct(nextValue).then(res => setSuggestionsSearch(res));\n    }, 1500);\n    debouncedSave();\n  };\n\n  const setSearch = () => {\n    setLoading(true);\n    setFocus(false);\n    searchProduct(valueSearch).then(res => {\n      setTimeout(() => setLoading(false), 1000);\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: {\n        q: valueSearch\n      }\n    });\n  };\n\n  const searchIndication = value => {\n    setLoading(true);\n    setFocus(false);\n    setValueSearch(value);\n    searchProduct(value).then(res => {\n      setTimeout(() => setLoading(false), 1000);\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: {\n        q: value\n      }\n    });\n  };\n\n  const backHome = () => {\n    setFocus(false);\n    setValueSearch('');\n    setSuggestionsSearch([]);\n    setBreadcrumb([]);\n    productsState[1]([]);\n    router.push({\n      pathname: '/'\n    });\n  };\n\n  useEffect(() => {\n    if (valueSearch === '' && query) {\n      setValueSearch(query);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(OverClick, {\n      primary: focus,\n      onClick: () => setFocus(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Style.Wrapper, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nav-logo\",\n            onClick: () => backHome(),\n            children: \"Mercado Livre Brasil - Onde comprar e vender de Tudo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nav-search\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Nunca dejes de buscar\",\n              type: \"search\",\n              name: \"search\",\n              autoComplete: \"off\",\n              value: valueSearch,\n              onClick: () => setFocus(!focus),\n              onChange: e => handleSearch(e)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `suggestion ${focus && suggestionsSearch.length > 0 ? 'active' : ''}`,\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: suggestionsSearch && suggestionsSearch.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  onClick: () => searchIndication(item.q),\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/img/ic_Search.png\",\n                    alt: \"icon search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: item.q\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 25\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSearch(),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/img/ic_Search.png\",\n                alt: \"Search icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nexport default Header;","map":{"version":3,"sources":["/Users/luisfelipe/Desktop/Projetos/ML-FRONT/front/src/components/Header/index.tsx"],"names":["React","useEffect","useContext","useRouter","LoadingContext","debounce","searchProduct","suggestionProduct","Style","Container","OverClick","Header","query","loadingContext","loadingState","focus","focusState","valueSearch","ValueState","productsState","suggestionsSearch","setSuggestionsSearch","setBreadcrumb","setLoading","setFocus","setValueSearch","router","handleSearch","event","value","nextValue","target","debouncedSave","then","res","setSearch","setTimeout","products","categories","push","pathname","q","searchIndication","backHome","e","length","map","item","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\n\nimport { LoadingContext } from 'context/loadingContext';\nimport { debounce } from 'lodash';\nimport { searchProduct, suggestionProduct } from 'services/api';\n\nimport * as Style from './styles';\nimport { Container } from 'styles/grid';\n\nimport OverClick from 'components/OverClick';\n\ninterface HeaderProps {\n  query?: string;\n}\n\nconst Header: React.FC<HeaderProps> = ({ query }) => {\n  const loadingContext = useContext(LoadingContext);\n  // const [suggestionsSearch, setSuggestionsSearch] = useState([]); // would be an API call normally\n  const {\n    loadingState,\n    focus,\n    focusState,\n    valueSearch,\n    ValueState,\n    productsState,\n    suggestionsSearch,\n    setSuggestionsSearch,\n    setBreadcrumb,\n  } = loadingContext;\n\n  const [, setLoading] = loadingState;\n  const [, setFocus] = focusState;\n  const [, setValueSearch] = ValueState;\n\n  const router = useRouter();\n\n  const handleSearch = (event) => {\n    const { value: nextValue } = event.target;\n    setValueSearch(nextValue);\n    const debouncedSave = debounce(() => {\n      suggestionProduct(nextValue).then((res) => setSuggestionsSearch(res));\n    }, 1500);\n    debouncedSave();\n  };\n\n  const setSearch = () => {\n    setLoading(true);\n    setFocus(false);\n    searchProduct(valueSearch).then((res) => {\n      setTimeout(() => setLoading(false), 1000);\n\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: { q: valueSearch },\n    });\n  };\n\n  const searchIndication = (value) => {\n    setLoading(true);\n    setFocus(false);\n    setValueSearch(value);\n    searchProduct(value).then((res) => {\n      setTimeout(() => setLoading(false), 1000);\n\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: { q: value },\n    });\n  };\n\n  const backHome = () => {\n    setFocus(false);\n    setValueSearch('');\n    setSuggestionsSearch([]);\n    setBreadcrumb([]);\n    productsState[1]([]);\n    router.push({\n      pathname: '/',\n    });\n  };\n\n  useEffect(() => {\n    if (valueSearch === '' && query) {\n      setValueSearch(query);\n    }\n  }, []);\n\n  return (\n    <>\n      <OverClick primary={focus} onClick={() => setFocus(false)} />\n      <Style.Wrapper>\n        <Container>\n          <div className=\"flex\">\n            <div className=\"nav-logo\" onClick={() => backHome()}>\n              Mercado Livre Brasil - Onde comprar e vender de Tudo\n            </div>\n\n            <div className=\"nav-search\">\n              <input\n                placeholder=\"Nunca dejes de buscar\"\n                type=\"search\"\n                name=\"search\"\n                autoComplete=\"off\"\n                value={valueSearch}\n                onClick={() => setFocus(!focus)}\n                onChange={(e) => handleSearch(e)}\n              />\n              <div\n                className={`suggestion ${\n                  focus && suggestionsSearch.length > 0 ? 'active' : ''\n                }`}\n              >\n                <ul>\n                  {suggestionsSearch &&\n                    suggestionsSearch.map((item, index) => (\n                      <li key={index} onClick={() => searchIndication(item.q)}>\n                        <img src=\"/img/ic_Search.png\" alt=\"icon search\" />\n                        <span>{item.q}</span>\n                      </li>\n                    ))}\n                </ul>\n              </div>\n              <button onClick={() => setSearch()}>\n                <img src=\"/img/ic_Search.png\" alt=\"Search icon\" />\n              </button>\n            </div>\n          </div>\n        </Container>\n      </Style.Wrapper>\n    </>\n  );\n};\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}
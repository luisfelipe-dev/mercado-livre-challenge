{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/Users/luisfelipe/Desktop/Projetos/ML-FRONT/front/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/luisfelipe/Desktop/Projetos/ML-FRONT/front/src/components/Header/index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport { LoadingContext } from 'context/loadingContext';\nimport { debounce } from 'lodash';\nimport { searchProduct, suggestionProduct } from 'services/api';\nimport * as Style from './styles';\nimport { Container } from 'styles/grid';\nimport OverClick from 'components/OverClick';\n\nvar Header = function Header(_ref) {\n  _s();\n\n  var query = _ref.query;\n  var loadingContext = useContext(LoadingContext); // const [suggestionsSearch, setSuggestionsSearch] = useState([]); // would be an API call normally\n\n  var loadingState = loadingContext.loadingState,\n      focus = loadingContext.focus,\n      focusState = loadingContext.focusState,\n      valueSearch = loadingContext.valueSearch,\n      ValueState = loadingContext.ValueState,\n      productsState = loadingContext.productsState,\n      suggestionsSearch = loadingContext.suggestionsSearch,\n      setSuggestionsSearch = loadingContext.setSuggestionsSearch,\n      setBreadcrumb = loadingContext.setBreadcrumb;\n\n  var _loadingState = _slicedToArray(loadingState, 2),\n      setLoading = _loadingState[1];\n\n  var _focusState = _slicedToArray(focusState, 2),\n      setFocus = _focusState[1];\n\n  var _ValueState = _slicedToArray(ValueState, 2),\n      setValueSearch = _ValueState[1];\n\n  var router = useRouter();\n\n  var handleSearch = function handleSearch(event) {\n    var nextValue = event.target.value;\n    setValueSearch(nextValue);\n    var debouncedSave = debounce(function () {\n      suggestionProduct(nextValue).then(function (res) {\n        return setSuggestionsSearch(res);\n      });\n    }, 1500);\n    debouncedSave();\n  };\n\n  var setSearch = function setSearch() {\n    setLoading(true);\n    setFocus(false);\n    searchProduct(valueSearch).then(function (res) {\n      setTimeout(function () {\n        return setLoading(false);\n      }, 1000);\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: {\n        q: valueSearch\n      }\n    });\n  };\n\n  var searchIndication = function searchIndication(value) {\n    setLoading(true);\n    setFocus(false);\n    setValueSearch(value);\n    searchProduct(value).then(function (res) {\n      setTimeout(function () {\n        return setLoading(false);\n      }, 1000);\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: {\n        q: value\n      }\n    });\n  };\n\n  var backHome = function backHome() {\n    setFocus(false);\n    setValueSearch('');\n    setSuggestionsSearch([]);\n    setBreadcrumb([]);\n    productsState[1]([]);\n    router.push({\n      pathname: '/'\n    });\n  };\n\n  useEffect(function () {\n    if (valueSearch === '' && query) {\n      setValueSearch(query);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(OverClick, {\n      primary: focus,\n      onClick: function onClick() {\n        return setFocus(false);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Style.Wrapper, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nav-logo\",\n            onClick: function onClick() {\n              return backHome();\n            },\n            children: \"Mercado Livre Brasil - Onde comprar e vender de Tudo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nav-search\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Nunca dejes de buscar\",\n              type: \"search\",\n              name: \"search\",\n              autoComplete: \"off\",\n              value: valueSearch,\n              onClick: function onClick() {\n                return setFocus(!focus);\n              },\n              onChange: function onChange(e) {\n                return handleSearch(e);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"suggestion \".concat(focus && suggestionsSearch.length > 0 ? 'active' : ''),\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                children: suggestionsSearch && suggestionsSearch.map(function (item, index) {\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    onClick: function onClick() {\n                      return searchIndication(item.q);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"/img/ic_Search.png\",\n                      alt: \"icon search\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 25\n                    }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: item.q\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 126,\n                      columnNumber: 25\n                    }, _this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 23\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                return setSearch();\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: \"/img/ic_Search.png\",\n                alt: \"Search icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true);\n};\n\n_s(Header, \"gHY9FK3qhyXjB1l/uXbWubgWDn8=\", false, function () {\n  return [useRouter];\n});\n\n_c = Header;\nexport default Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["/Users/luisfelipe/Desktop/Projetos/ML-FRONT/front/src/components/Header/index.tsx"],"names":["React","useEffect","useContext","useRouter","LoadingContext","debounce","searchProduct","suggestionProduct","Style","Container","OverClick","Header","query","loadingContext","loadingState","focus","focusState","valueSearch","ValueState","productsState","suggestionsSearch","setSuggestionsSearch","setBreadcrumb","setLoading","setFocus","setValueSearch","router","handleSearch","event","nextValue","target","value","debouncedSave","then","res","setSearch","setTimeout","products","categories","push","pathname","q","searchIndication","backHome","e","length","map","item","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\n\nimport { LoadingContext } from 'context/loadingContext';\nimport { debounce } from 'lodash';\nimport { searchProduct, suggestionProduct } from 'services/api';\n\nimport * as Style from './styles';\nimport { Container } from 'styles/grid';\n\nimport OverClick from 'components/OverClick';\n\ninterface HeaderProps {\n  query?: string;\n}\n\nconst Header: React.FC<HeaderProps> = ({ query }) => {\n  const loadingContext = useContext(LoadingContext);\n  // const [suggestionsSearch, setSuggestionsSearch] = useState([]); // would be an API call normally\n  const {\n    loadingState,\n    focus,\n    focusState,\n    valueSearch,\n    ValueState,\n    productsState,\n    suggestionsSearch,\n    setSuggestionsSearch,\n    setBreadcrumb,\n  } = loadingContext;\n\n  const [, setLoading] = loadingState;\n  const [, setFocus] = focusState;\n  const [, setValueSearch] = ValueState;\n\n  const router = useRouter();\n\n  const handleSearch = (event) => {\n    const { value: nextValue } = event.target;\n    setValueSearch(nextValue);\n    const debouncedSave = debounce(() => {\n      suggestionProduct(nextValue).then((res) => setSuggestionsSearch(res));\n    }, 1500);\n    debouncedSave();\n  };\n\n  const setSearch = () => {\n    setLoading(true);\n    setFocus(false);\n    searchProduct(valueSearch).then((res) => {\n      setTimeout(() => setLoading(false), 1000);\n\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: { q: valueSearch },\n    });\n  };\n\n  const searchIndication = (value) => {\n    setLoading(true);\n    setFocus(false);\n    setValueSearch(value);\n    searchProduct(value).then((res) => {\n      setTimeout(() => setLoading(false), 1000);\n\n      productsState[1](res.products);\n      setBreadcrumb(res.categories);\n    });\n    router.push({\n      pathname: '/items',\n      query: { q: value },\n    });\n  };\n\n  const backHome = () => {\n    setFocus(false);\n    setValueSearch('');\n    setSuggestionsSearch([]);\n    setBreadcrumb([]);\n    productsState[1]([]);\n    router.push({\n      pathname: '/',\n    });\n  };\n\n  useEffect(() => {\n    if (valueSearch === '' && query) {\n      setValueSearch(query);\n    }\n  }, []);\n\n  return (\n    <>\n      <OverClick primary={focus} onClick={() => setFocus(false)} />\n      <Style.Wrapper>\n        <Container>\n          <div className=\"flex\">\n            <div className=\"nav-logo\" onClick={() => backHome()}>\n              Mercado Livre Brasil - Onde comprar e vender de Tudo\n            </div>\n\n            <div className=\"nav-search\">\n              <input\n                placeholder=\"Nunca dejes de buscar\"\n                type=\"search\"\n                name=\"search\"\n                autoComplete=\"off\"\n                value={valueSearch}\n                onClick={() => setFocus(!focus)}\n                onChange={(e) => handleSearch(e)}\n              />\n              <div\n                className={`suggestion ${\n                  focus && suggestionsSearch.length > 0 ? 'active' : ''\n                }`}\n              >\n                <ul>\n                  {suggestionsSearch &&\n                    suggestionsSearch.map((item, index) => (\n                      <li key={index} onClick={() => searchIndication(item.q)}>\n                        <img src=\"/img/ic_Search.png\" alt=\"icon search\" />\n                        <span>{item.q}</span>\n                      </li>\n                    ))}\n                </ul>\n              </div>\n              <button onClick={() => setSearch()}>\n                <img src=\"/img/ic_Search.png\" alt=\"Search icon\" />\n              </button>\n            </div>\n          </div>\n        </Container>\n      </Style.Wrapper>\n    </>\n  );\n};\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}